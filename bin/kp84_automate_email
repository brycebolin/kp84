#!/usr/bin/env python

import os, sys, optparse, shutil, glob, copy
import numpy as np
import matplotlib
matplotlib.use('Agg')
from matplotlib import pyplot as plt

def parse_commandline():
    """
    Parse the options given on the command-line.
    """
    parser = optparse.OptionParser()

    parser.add_option("-d","--day",default="20190416")

    opts, args = parser.parse_args()

    return opts

# Parse command line
opts = parse_commandline()
day = opts.day
inputDir = os.path.join("/Data/",opts.day)
print(os.path.join(inputDir,'*.fits.fz'))
print(stop)

filenames = glob.glob(os.path.join(inputDir,'*.fits')) + glob.glob(os.path.join(inputDir,'*.fits.fz'))

data = {}
for filename in filenames:
    filenameSplit = filename.split("/")[-1].split("_")
    obj, mode, filt = filenameSplit[0], int(filenameSplit[1]), filenameSplit[2]

    print(obj, mode, filt)
    print(stop)    
 
    hdulist = fits.open(filename)
    header = hdulist[0].header
    dateobs = Time(hdulist[1].header["DATE"])
    mjd = dateobs.mjd

    mjds = []
    for jj in range(len(hdulist)-1):
        if "DATE" in hdulist[jj+1].header:
            dateobs = Time(hdulist[jj+1].header["DATE"])
            mjds.append(dateobs.mjd)


